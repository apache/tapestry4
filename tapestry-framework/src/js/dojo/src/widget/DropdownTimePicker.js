
dojo.provide("dojo.widget.DropdownTimePicker");dojo.require("dojo.widget.*");dojo.require("dojo.widget.DropdownContainer");dojo.require("dojo.widget.TimePicker");dojo.require("dojo.event.*");dojo.require("dojo.html.*");dojo.require("dojo.date.format");dojo.require("dojo.date.serialize");dojo.require("dojo.i18n.common");dojo.requireLocalization("dojo.widget", "DropdownTimePicker");dojo.widget.defineWidget(
"dojo.widget.DropdownTimePicker",dojo.widget.DropdownContainer,{iconURL: dojo.uri.dojoUri("src/widget/templates/images/timeIcon.gif"),zIndex: "10",displayFormat: "",timeFormat: "",formatLength: "short",value: "",postMixInProperties: function() {dojo.widget.DropdownTimePicker.superclass.postMixInProperties.apply(this, arguments);var messages = dojo.i18n.getLocalization("dojo.widget", "DropdownTimePicker", this.lang);this.iconAlt = messages.selectTime;},fillInTemplate: function(){dojo.widget.DropdownTimePicker.superclass.fillInTemplate.apply(this, arguments);var timeProps = { widgetContainerId: this.widgetId, lang: this.lang };this.timePicker = dojo.widget.createWidget("TimePicker", timeProps, this.containerNode, "child");dojo.event.connect(this.timePicker, "onSetTime", this, "onSetTime");dojo.event.connect(this.inputNode,  "onchange",  this, "onInputChange");this.containerNode.style.zIndex = this.zIndex;this.containerNode.explodeClassName = "timeBorder";if(this.value){this.timePicker.selectedTime.anyTime = false;this.timePicker.setDateTime("2005-01-01T" + this.value);this.timePicker.initData();this.timePicker.initUI();this.onSetTime();}},onSetTime: function(){if(this.timePicker.selectedTime.anyTime){this.inputNode.value = "";}else if(this.timeFormat){dojo.deprecated("dojo.widget.DropdownTimePicker","Must use displayFormat attribute instead of timeFormat.  See dojo.date.format for specification.", "0.5");this.inputNode.value = dojo.date.strftime(this.timePicker.time, this.timeFormat, this.lang);}else{this.inputNode.value = dojo.date.format(this.timePicker.time,{formatLength:this.formatLength, timePattern:this.displayFormat, selector:'timeOnly', locale:this.lang});}
this.hideContainer();},onInputChange: function(){this.timePicker.time = "2005-01-01T" + this.inputNode.value;this.timePicker.setDateTime(this.timePicker.time);this.timePicker.initData();this.timePicker.initUI();},enable: function() {this.inputNode.disabled = false;this.timePicker.enable();dojo.widget.DropdownTimePicker.superclass.enable.apply(this, arguments);},disable: function() {this.inputNode.disabled = true;this.timePicker.disable();dojo.widget.DropdownTimePicker.superclass.disable.apply(this, arguments);}}
);